(()=>{"use strict";var t,e={462:(t,e,s)=>{var i=s(260),o=s.n(i);const n=class{constructor(){this.name="constObj",this.appVersion="2.0.0",this.appURL="https://dyuta.github.io/pote-walk/",this.numberOfStores=6,this.noiUrl="https://www.tunecore.co.jp/artists/noiyuhi?lang=ja",this.kotobaUrl="https://liondo.jp/?page_id=3029",this.naoeUrl="https://twitter.com/naoeaki",this.gameModes=["Normal","Sanpo","Nope"],this.bookstoreList=[{name:"NENOi",line:"東京メトロ",station:"早稲田",url:"https://nenoi.jp/"},{name:"マルジナリア書店",line:"京王 JR",station:"分倍河原",url:"https://twitter.com/yohakushapub"},{name:"書肆 海と夕焼",line:"JR",station:"谷保",url:"https://twitter.com/bs_sea_sunset_"},{name:"BREWBOOKS",line:"JR",station:"西荻窪",url:"https://brewbooks.net/"},{name:"山陽堂書店",line:"東京メトロ",station:"表参道",url:"https://sanyodo-shoten.co.jp/"},{name:"双子のライオン堂",line:"東京メトロ",station:"赤坂",url:"https://liondo.jp/"}],this.volumeBGM=.1,this.volumeSound=.2,this.colors={background:"81858E",backgroundAsh:"FCFCFC",backgroundNPPlay:"C4C5C9"},this.jumpVelocity=-1250,this.gameSpeedNormal=9,this.gameSpeedFast=9,this.gameSpeedNP=10,this.gameSpeedNPFast=12,this.obsRespawnInterval=1100,this.coinRespawnInterval=2200,this.coinRespawnIntervalNP=4400,this.storeRespawnInterval=5500,this.coinCntInterval=128,this.npCloudIncAlphaInterval=1100,this.npCloudIncVal=.3,this.distances={obstacleFrom:400,obstacleTo:700,coinFromFirst:100,coinToFirst:350,coinFromSec:850,coinToSec:950,bookstore:400,potehome:500},this.worldScroll=.6,this.fontoConf={},this.fontoConf.counter={fontFamily:'"Roboto"',fontSize:"28px",fill:"#878176"},this.fontoConf.loader={fontFamily:'"Roboto"',fontSize:"18px",fill:"#878176"},this.fontoConf.openingDialogue={fontFamily:'"Zen Maru Gothic"',fontSize:"38px",fill:"#5E5A53",fontWeight:"bold"},this.fontoConf.storeinfo01={fontFamily:'"Zen Maru Gothic"',fontSize:"32px",fill:"#878176"};const t="#EFA92A";this.fontoConf.resultTitle={fontFamily:'"Concert One"',fontSize:"64px",fill:t},this.fontoConf.resultDetail={fontFamily:'"Concert One"',fontSize:"48px",fill:t},this.fontoConf.TapLink={fontFamily:'"Roboto"',fontSize:"40px",fill:"#878176"},this.fontoConf.titleNP={fontFamily:'"Kumbh Sans"',fontSize:"82px",fill:"#ffffff"},this.fontoConf.bodyNP={fontFamily:'"Albert Sans"',fontSize:"48px",fill:"#ffffff"},this.skipTitleNPTrue=!0,this.npOprahshotFrameRate=4,this.npscenetitleList=[{name:""},{name:"GHOST"},{name:"CLOVER"},{name:"GORDY"},{name:"LUCKY"},{name:"Jean Jacket"},{name:"Jean Jacket"}],this.npSpObstacleList=[{name:"kunekuneNP",anim:"kune-kune-red",distanceX:this.distances.obstacleFrom,posYUp:0},{name:"kunekuneYellowNP",anim:"kune-kune-yellow",distanceX:this.distances.obstacleFrom,posYUp:0},{name:"alienKids",anim:"alienKids-look",distanceX:this.distances.obstacleFrom,posYUp:0},{name:"monkey",anim:"monkey-angry",distanceX:this.distances.obstacleFrom,posYUp:0},{name:"flagropeNP",anim:"nope-rope",distanceX:this.distances.obstacleFrom,posYUp:120},{name:"motorcycleNP",anim:"bike-ride",distanceX:this.distances.obstacleFrom,posYUp:0},{name:"UFONP",anim:"UFO-NP-fly",distanceX:this.distances.obstacleFrom,posYUp:5}]}};const a=class{constructor(t){this.hsv=Phaser.Display.Color.HSVColorWheel(),this.gameMode=t.gameModes[0],this.skipTitleNP=!1,this.storeVisit={store1:!1,store2:!1,store3:!1,store4:!1,store5:!1,store6:!1},this.result={coin:0,coinGen:0,miss:0,book:0,visited:0},this._isSceneChangeReserved=!1,this.mediaManager={}}};const h=class{constructor(t){t.scene?(this.scene=t.scene,this.volumeBGM=this.scene.consts.volumeBGM,this.volumeSound=this.scene.consts.volumeSound):this.scene={},this.backGroundMusic={},this.sound={}}playSound(t,e=this.volumeSound){this.sound=this.scene.sound.add(t,{volume:e}),this.sound.play()}setBGM(t,e=this.volumeBGM){this.stopBGM(),this.stopPlaingSound(),this.backGroundMusic=this.scene.sound.add(t,{volume:e,loop:!0}),this.backGroundMusic.play()}stopBGM(){void 0===this.backGroundMusic.key||""!=this.backGroundMusic.key&&(this.backGroundMusic.stop(),this.backGroundMusic.destroy())}stopPlaingSound(){void 0===this.sound.key||""!=this.sound.key&&(this.sound.stop(),this.sound.destroy())}};class r extends o().Scene{constructor(t="PlayScene"){super(t)}init(t){this.model=t.model}create(){this.consts=new n;const{height:t,width:e}=this.game.config,s=.5*t;this.initProperties(),this.openingDialogue=this.add.text(100,170,"そうだ、本屋に行こう！",this.consts.fontoConf.openingDialogue).setOrigin(0,0),this.destinationTxt=this.add.text(20,10,`行先: ${this.consts.bookstoreList[this.model.result.visited].station}駅  ${this.consts.bookstoreList[this.model.result.visited].name}`,this.consts.fontoConf.storeinfo01).setAlpha(0),this.startTrigger=this.physics.add.sprite(0,10).setOrigin(0,1).setImmovable(),this.poteGround=this.physics.add.image(0,s+26).setSize(250,20).setOrigin(0,1).setImmovable(),this.backBuildings=this.add.tileSprite(0,s-20,e,112,"backBuildings").setOrigin(0,1).setScale(1.2).setAlpha(0),this.ground=this.add.tileSprite(0,s+22,this.groundInitwidth,48,"ground").setOrigin(0,1),this.envLayer=this.add.layer(),this.environment=this.add.group(),this.initEnvObjects(t,e,this.environment,this.envLayer),this.bookStoreLayer=this.add.layer(),this.bookStores=this.physics.add.group(),this.objLayer=this.add.layer(),this.obstacles=this.physics.add.group(),this.coinLayer=this.add.layer(),this.coins=this.physics.add.group(),this.poteHomeLayer=this.add.layer(),this.poteHomeGrp=this.physics.add.group(),this.counterItems=this.add.group();const i=e-300;this.initCounters(i,11,28,this.counterItems);this.bookStoreIcons=this.add.group(),this.bookStoreIcons.addMultiple([this.add.image(80,s+80,"bookstoreicon01"),this.add.image(200,s+80,"bookstoreicon02"),this.add.image(320,s+80,"bookstoreicon03"),this.add.image(440,s+80,"bookstoreicon04"),this.add.image(560,s+80,"bookstoreicon05"),this.add.image(680,s+80,"bookstoreicon06")]),this.bookStoreIcons.setAlpha(0),this.pote=this.physics.add.sprite(0,s,"pote-idle").setOrigin(0,1).setCollideWorldBounds(!0).setGravityY(3e3),this.pote.hitPose=!1,this.initAnims(),this.initBookParticle(),this.initCoinParticle(),this.initColliders(),this.initStartTrigger(),this.handleInputs()}initProperties(){this.isGamerunning=!1,this.gameSpeed=this.consts.gameSpeedNormal,this.groundInitwidth=100,this.obsRespawnTime=0,this.coinRespawnTime=0,this.storeRespawnTime=0,this.npCloudIncAlphaIncTime=0,this.counterStr="coins:0    books:0",this.coinCnt=0,this.bookCnt=0,this.storePlacedCnt=0}initEnvObjects(t,e,s,i){this.stayingCloud=this.add.image(.8*e,190,"cloudNope").setInteractive().setAlpha(0).setScale(1.1),i.add(this.stayingCloud),s.addMultiple([this.add.image(.25*e,170,"cloud"),this.add.image(.62*e,80,"cloud"),this.add.image(.9*e,120,"cloud")]),s.setAlpha(0),i.add(s.getChildren())}initCounters(t,e,s,i){this.coinCounterText=this.add.text(t+20,e,"0",this.consts.fontoConf.counter),this.bookCounterText=this.add.text(t+160,e,"0",this.consts.fontoConf.counter),i.addMultiple([this.add.sprite(t,s,"coinBookIcon",0).setScale(2),this.add.sprite(t+140,s,"coinBookIcon",1).setScale(2),this.coinCounterText,this.bookCounterText]),i.setAlpha(0)}initColliders(){this.physics.add.collider(this.pote,this.poteGround),this.physics.add.overlap(this.pote,this.bookStores,((t,e)=>{if(!e.hitFlg){console.log("enter store"),e.hitFlg=!0,this.bookStoreIcons.getChildren()[this.model.result.visited].setAlpha(1),this.model.storeVisit[`store${e.bookStoreNum}`]=!0,this.model.result.visited++,this.model.result.visited<this.consts.numberOfStores?this.destinationTxt.setText(`行先: ${this.consts.bookstoreList[this.model.result.visited].station}駅  ${this.consts.bookstoreList[this.model.result.visited].name}`):this.destinationTxt.setText("行先: 自宅"),this.bookCnt+=this.coinCnt,this.bookBoughtNow=this.coinCnt,this.coinCnt=0,this.model.result.book=this.bookCnt;for(let e=0;e<this.bookBoughtNow;e++)this.timerOneShot=this.time.delayedCall(140*e,(()=>{this.model.mediaManager.playSound("bookSound",20*this.consts.volumeSound),this.bookParticle.emitParticleAt(t.x+30,t.y-100)}),this);3==this.model.result.visited&&(this.gameSpeed=this.consts.gameSpeedFast)}}),null,this),this.model.gameMode!==this.consts.gameModes[1]&&this.physics.add.overlap(this.pote,this.obstacles,((t,e)=>{e.hitFlg||(console.log("hit"),e.hitFlg=!0,this.model.result.miss++,this.coinCnt>0&&(this.coinCnt--,this.coinParticle.emitParticleAt(t.x+10,t.y-70)),this.model.mediaManager.playSound("damageSound",.8*this.consts.volumeSound),this.pote.hitPose||(this.pote.hitPose=!0,console.log("hit-pose"),this.timerOneShot=this.time.delayedCall(300,(()=>{this.pote.hitPose=!1}),this)))}),null,this),this.physics.add.overlap(this.pote,this.coins,((t,e)=>{e.hitFlg||(console.log("getcoin"),e.hitFlg=!0,this.model.mediaManager.playSound("coinSound"),this.coinCnt++,this.model.result.coin++,this.coins.killAndHide(e))}),null,this),this.physics.add.overlap(this.pote,this.poteHomeGrp,((t,e)=>{e.hitFlg||(e.hitFlg=!0,this.isGamerunning=!1,this.model.mediaManager.stopBGM(),this.model.mediaManager.playSound("goalSound",.2*this.consts.volumeSound),this.pote.play("pote-happy",1),this.timerOneShot=this.time.delayedCall(2800,(()=>{this.goClearScene()}),this))}),null,this)}initStartTrigger(){const{height:t,width:e}=this.game.config,s=.5*t;this.physics.add.overlap(this.startTrigger,this.pote,(()=>{if(10===this.startTrigger.y)return this.startTrigger.body.reset(0,s),this.model.mediaManager.setBGM("mainbgm"),void this.openingDialogue.setAlpha(0);this.startTrigger.disableBody(!0,!0);const t=this.time.addEvent({delay:1e3/60,loop:!0,callbackScope:this,callback:()=>{this.pote.setVelocityX(80),this.pote.play("pote-run",1),this.ground.width<e?this.ground.width+=34:(this.ground.width=e,this.isGamerunning=!0,this.pote.setVelocityX(0),this.environment.setAlpha(1),this.destinationTxt.setAlpha(1),this.backBuildings.setAlpha(.8),this.counterItems.setAlpha(1),this.coinCounterText.setAlpha(1),this.bookCounterText.setAlpha(1),this.cameras.main.setBackgroundColor(this.consts.colors.backgroundAsh),t.remove())}})}),null,this)}callbackStartEvent(){}initAnims(){this.anims.create({key:"pote-run",frames:this.anims.generateFrameNumbers("pote",{start:1,end:2}),frameRate:10,repeat:-1}),this.anims.create({key:"pote-happy",frames:this.anims.generateFrameNumbers("potehappy",{start:0,end:1}),frameRate:6,repeat:-1}),this.anims.create({key:"enemy-bird-fly",frames:this.anims.generateFrameNumbers("enemy-bird",{start:0,end:1}),frameRate:6,repeat:-1}),this.anims.create({key:"UFO-X-fly",frames:this.anims.generateFrameNumbers("UFO-X",{start:0,end:1}),frameRate:5,repeat:-1}),this.anims.create({key:"bicyclelow-ride",frames:this.anims.generateFrameNumbers("obstacleOrg-1",{start:0,end:1}),frameRate:6,repeat:-1}),this.anims.create({key:"coin-rotate",frames:this.anims.generateFrameNumbers("coin",{start:0,end:5}),frameRate:6,repeat:-1})}initBookParticle(){this.bookParticle=this.add.particles("coinBookIcon"),this.bookParticle.createEmitter({frame:1,angle:{min:240,max:250},speed:{min:300,max:400},quantity:1,lifespan:400,alpha:{start:1,end:.5},scale:2,gravityY:800,on:!1})}initCoinParticle(){this.coinParticle=this.add.particles("coinBookIcon"),this.coinParticle.createEmitter({frame:0,angle:{min:240,max:250},speed:{min:100,max:150},quantity:1,lifespan:400,alpha:{start:1,end:0},scale:2,gravityY:800,on:!1})}handleInputs(){this.input.on("pointerdown",(()=>{this.pote.body.onFloor()&&(this.pote.setVelocityY(this.consts.jumpVelocity),this.model.mediaManager.playSound("jumpSound",.8*this.consts.volumeSound))}),this),this.input.keyboard.on("keydown-SPACE",(()=>{this.pote.body.onFloor()&&(this.pote.setVelocityY(this.consts.jumpVelocity),this.model.mediaManager.playSound("jumpSound",.8*this.consts.volumeSound))}),this),this.stayingCloud.on("pointerdown",(()=>{this.model.gameMode!=this.consts.gameModes[2]&&this.goNPScene()}),this)}placeObstacle(){const{width:t,height:e}=this.game.config,s=.5*e,i=Math.floor(7*Math.random())+1,n=o().Math.Between(this.consts.distances.obstacleFrom,this.consts.distances.obstacleTo);let a;if(console.log(i),i>6){console.log("bird");const e=[40,120],i=["enemy-bird-fly","UFO-X-fly"];a=this.obstacles.create(t+n,s-e[Math.floor(2*Math.random())],"enemy-bird"),a.play(i[Math.floor(2*Math.random())],1),a.body.height=a.body.height/1.5}else 1==i?(console.log("obs1 bicycle"),a=this.obstacles.create(t+n,s,"obstacleOrg-${obstacleNum}"),a.play("bicyclelow-ride",1)):(a=this.obstacles.create(t+n,s,`obstacle-${i}`),a.body.offset.y=5);a.setOrigin(0,1).setImmovable(),a.hitFlg=!1,this.objLayer.add(a)}placeCoin(){const{width:t,height:e}=this.game.config,s=.5*e;let i=o().Math.Between(850,950),n=22;const a=[o().Math.Between(100,350),o().Math.Between(850,950)],h=[22,70,100];let r;this.storePlacedCnt>1&&(n=h[Math.floor(3*Math.random())]),this.storePlacedCnt>2&&(i=a[Math.floor(2*Math.random())]),console.log("coin"),r=this.coins.create(t+i,s-n,"coin"),r.play("coin-rotate",0),r.scale=2*r.scale,r.setOrigin(0,1).setImmovable(),r.hitFlg=!1,this.model.result.coinGen++,this.coinLayer.add(r)}placeBookstore(t){const{width:e,height:s}=this.game.config,i=.5*s;let o;console.log(t);const n=`bookstore0${t}`;console.log(n),o=this.bookStores.create(e+200,i,n),o.setOrigin(0,1).setImmovable(),o.hitFlg=!1,o.bookStoreNum=t,this.bookStoreLayer.add(o)}placePoteHome(){const{width:t,height:e}=this.game.config,s=.5*e;console.log("potehome"),this.poteHome=this.poteHomeGrp.create(t+200,s+28,"potehome").setOrigin(0,1).setImmovable(),this.poteHome.hitFlg=!1,this.poteHomeLayer.add(this.poteHome)}goClearScene(){this.scene.start("ResultScene",{model:this.model})}goNPScene(){console.log("NOPE"),this.restartGame(this.consts.gameModes[2])}restartGame(t=this.consts.gameModes[0],e=!1){let s="PlayScene";this.model.mediaManager.stopBGM(),this.model.mediaManager.stopPlaingSound(),this.model=new a(this.consts),this.model.mediaManager=new h({scene:this}),t==this.consts.gameModes[1]?this.model.gameMode=this.consts.gameModes[1]:t==this.consts.gameModes[2]&&(console.log("NOPEsetting"),s="PlayNPScene",this.model.gameMode=this.consts.gameModes[2],this.model.skipTitleNP=e),this.scene.start(s,{model:this.model})}update(t,e){this.isGamerunning&&(this.coinCounterText.setText(`: ${this.coinCnt}`),this.bookCounterText.setText(`: ${this.bookCnt}`),this.ground.tilePositionX+=this.gameSpeed*this.consts.worldScroll,this.backBuildings.tilePositionX+=this.gameSpeed*this.consts.worldScroll*.4,o().Actions.IncX(this.environment.getChildren(),-.5),o().Actions.IncX(this.obstacles.getChildren(),-this.gameSpeed),o().Actions.IncX(this.coins.getChildren(),-this.gameSpeed),o().Actions.IncX(this.bookStores.getChildren(),-this.gameSpeed*this.consts.worldScroll),o().Actions.IncX(this.poteHomeGrp.getChildren(),-this.gameSpeed*this.consts.worldScroll),this.obsRespawnTime+=e*this.gameSpeed*.08,this.coinRespawnTime+=e*this.gameSpeed*.08,this.storeRespawnTime+=e*this.gameSpeed*.08,this.homeTime+=e*this.gameSpeed*.08,this.npCloudIncAlphaIncTime+=e*this.gameSpeed*.08,this.npCloudIncAlphaIncTime>=this.consts.npCloudIncAlphaInterval&&this.stayingCloud.alpha<1&&(this.stayingCloud.setAlpha(Math.min(this.stayingCloud.alpha+this.consts.npCloudIncVal,1)),this.npCloudIncAlphaIncTime=0),this.obsRespawnTime>=this.consts.obsRespawnInterval&&(this.placeObstacle(),this.obsRespawnTime=0),this.storePlacedCnt<this.consts.numberOfStores&&this.coinRespawnTime>=this.consts.coinRespawnInterval&&(this.placeCoin(),this.coinRespawnTime=0),this.storeRespawnTime>=this.consts.storeRespawnInterval&&(this.storePlacedCnt<this.consts.numberOfStores?(this.placeBookstore(this.storePlacedCnt+1),this.storeRespawnTime=0,this.storePlacedCnt++):(this.placePoteHome(),this.storeRespawnTime=0)),this.removeObjPassedDisplay(this.obstacles),this.removeObjPassedDisplay(this.coins),this.removeObjPassedDisplay(this.bookStores),this.environment.getChildren().forEach((t=>{t.getBounds().right<0&&(t.x=this.game.config.width+30)})),this.pote.hitPose?this.pote.setTexture("pote-hurt"):this.pote.body.onFloor()?this.pote.play("pote-run",!0):(this.pote.anims.stop(),this.pote.setTexture("pote")))}removeObjPassedDisplay(t){t.getChildren().forEach((e=>{e.getBounds().right<0&&(console.log("removed:"+e.texture.key),t.remove(e,!0,!0))}))}}const l=r;var d=s(933),c=s.n(d);class m extends o().Loader.File{constructor(t,e,s="google"){super(t,{type:"webfont",key:e.toString()}),this.fontNames=Array.isArray(e)?e:[e],this.service=s,this.fontsLoadedCount=0}load(){const t={fontactive:t=>{this.checkLoadedFonts(t)},fontinactive:t=>{this.checkLoadedFonts(t)}};switch(this.service){case"google":t[this.service]=this.getGoogleConfig();break;case"adobe-edge":t.typekit=this.getAdobeEdgeConfig();break;default:throw new Error("Unsupported font service")}c().load(t)}getGoogleConfig(){return{families:this.fontNames}}getAdobeEdgeConfig(){return{id:this.fontNames.join(";"),api:"//use.edgefonts.net"}}checkLoadedFonts(t){this.fontNames.indexOf(t)<0||(++this.fontsLoadedCount,this.fontsLoadedCount>=this.fontNames.length&&this.loader.nextFile(this,!0))}}class p extends o().Scene{constructor(t="PreloadScene"){super(t)}preload(){this.consts=new n,this.showLoadProgressBar(),this.load.audio("mainbgm","assets/PW_01_Play_2022-11-06.mp3"),this.load.audio("bookSound","assets/PW_02_Book_2022-11-05.mp3"),this.load.audio("jumpSound","assets/PW_03_Jump_2022-11-05.mp3"),this.load.audio("damageSound","assets/PW_04_Damage_2022-11-05.mp3"),this.load.audio("coinSound","assets/PW_05_Coin_2022-11-05.mp3"),this.load.audio("clearbgm","assets/PM_07_ED_2022-05-08.mp3"),this.load.audio("goalSound","assets/PW_06_Goal_2022-11-08.mp3"),this.load.audio("windySound","assets/NP/windy.mp3"),this.load.image("ground","assets/ground2.png"),this.load.image("backBuildings","assets/Buildingsbackground.png"),this.load.image("restart","assets/restart.png"),this.load.image("restartSafe","assets/restart_safe.png"),this.load.image("cloud","assets/cloud_1.png"),this.load.image("cloudNope","assets/cloud_2.png"),this.load.image("pote-idle","assets/pote04_idle2.png"),this.load.image("pote-hurt","assets/pote05_hurt2.png"),this.load.image("bookstore01","assets/shop_1_Nenoi.png"),this.load.image("bookstore02","assets/shop_3_Marginalia.png"),this.load.image("bookstore03","assets/shop_4_ShoshiYuYaketoUmi.png"),this.load.image("bookstore04","assets/shop_5_BrewBooks.png"),this.load.image("bookstore05","assets/shop_6_Sanyodo.png"),this.load.image("bookstore06","assets/shop_2_Futago.png"),this.load.image("bookstoreicon01","assets/bookstore_icon/05_nenoi.png"),this.load.image("bookstoreicon02","assets/bookstore_icon/06_marginaria.png"),this.load.image("bookstoreicon03","assets/bookstore_icon/03_shoshiyuyaketoumi.png"),this.load.image("bookstoreicon04","assets/bookstore_icon/02_brewbooks.png"),this.load.image("bookstoreicon05","assets/bookstore_icon/04_sanyodo.png"),this.load.image("bookstoreicon06","assets/bookstore_icon/01_futago_lion.png"),this.load.image("potehome","assets/home_2.png"),this.load.image("homeInside","assets/HomeInside2.png"),this.load.image("endingBook","assets/endingBook.png"),this.load.image("endingBook0","assets/endingBook0.png"),this.load.image("endingBook1","assets/endingBook1.png"),this.load.image("endingBook2","assets/endingBook2.png"),this.load.image("endingBook3","assets/endingBook3.png"),this.load.image("endingBook4","assets/endingBook4.png"),this.load.image("endingBook5","assets/endingBook5.png"),this.load.image("endingBook6","assets/endingBook6.png"),this.load.image("endingBook7","assets/endingBook7.png"),this.load.image("endingBook8","assets/endingBook8.png"),this.load.image("endingBook9","assets/endingBook9.png"),this.load.image("endingBook10","assets/endingBook10.png"),this.load.image("endingBook11","assets/endingBook11.png"),this.load.image("endingBook12","assets/endingBook12.png"),this.load.image("endingBook13","assets/endingBook13.png"),this.load.image("endingBook14","assets/endingBook14.png"),this.load.image("endingBook15","assets/endingBook15.png"),this.load.image("endingBook16","assets/endingBook16.png"),this.load.image("endingBook17","assets/endingBook17.png"),this.load.image("endingBook18","assets/endingBook18.png"),this.load.image("noi_album","assets/soup_small_col2.png"),this.load.image("kotobadakenochizu","assets/kotobadakenochizu_comp.png"),this.load.image("pictframe_brown","assets/pictframe_brown.png"),this.load.image("pote-ganen","assets/potatoGannen_notitle.png"),this.load.spritesheet("coinBookIcon","assets/Coin_Book_icon.png",{frameWidth:32,frameHeight:32}),this.load.spritesheet("star","assets/stars.png",{frameWidth:9,frameHeight:9}),this.load.spritesheet("moon","assets/moon.png",{frameWidth:20,frameHeight:40}),this.load.spritesheet("enemy-bird","assets/bird_pigeon.png",{frameWidth:96,frameHeight:72}),this.load.spritesheet("UFO-X","assets/UFO_alienX.png",{frameWidth:96,frameHeight:72}),this.load.spritesheet("pote","assets/pote03_run.png",{frameWidth:88,frameHeight:94}),this.load.spritesheet("potehappy","assets/pote06_happy.png",{frameWidth:88,frameHeight:92}),this.load.spritesheet("potedance","assets/pote07_dance.png",{frameWidth:88,frameHeight:92}),this.load.spritesheet("coin","assets/coin01_gold01_spriteSheet.png",{frameWidth:32,frameHeight:32}),this.load.spritesheet("obstacleOrg-1","assets/Bicycle_low_spr_large.png",{frameWidth:96,frameHeight:108}),this.load.image("obstacle-1","assets/cactuses_small_1.png"),this.load.image("obstacle-2","assets/Plant_2_small_small.png"),this.load.image("obstacle-3","assets/Plant_3_small_tall.png"),this.load.image("obstacle-4","assets/Plant_4_middle_small.png"),this.load.image("obstacle-5","assets/Plant_3_small_tall.png"),this.load.image("obstacle-6","assets/Plant_6_wide_tall.png"),this.load.addFile(new m(this.load,["Concert One","Roboto","Zen Maru Gothic","Noto Sans JP","Sawarabi Gothic","Kumbh Sans","Albert Sans"])),this.preloadNP()}preloadNP(){console.log("preLoadNPResources"),this.load.image("groundNP","assets/NP/ground_NP.png"),this.load.image("backMountainNP","assets/NP/mountain_back.png"),this.load.image("backCactusNP","assets/NP/cactus_back.png"),this.load.image("buildingNP01","assets/NP/building1_OJhome.png"),this.load.image("buildingNP02","assets/NP/building2_Supermarket.png"),this.load.image("buildingNP03","assets/NP/building3_Studio.png"),this.load.image("buildingNP04","assets/NP/building4_jupepark.png"),this.load.image("buildingNP05","assets/NP/building5_bloodyhome.png"),this.load.image("buildingNP06","assets/NP/building6_smallhouse.png"),this.load.image("buildingNPicon01","assets/NP/icon_buildingNP_1.png"),this.load.image("buildingNPicon02","assets/NP/icon_buildingNP_2.png"),this.load.image("buildingNPicon03","assets/NP/icon_buildingNP_3.png"),this.load.image("buildingNPicon04","assets/NP/icon_buildingNP_4.png"),this.load.image("buildingNPicon05","assets/NP/icon_buildingNP_5.png"),this.load.image("buildingNPicon06","assets/NP/icon_buildingNP_6.png"),this.load.image("goalNP","assets/NP/building7_Goal_Cowboy.png"),this.load.image("outYonderNP","assets/NP/OutYonder.png"),this.load.image("perfectBroNP","assets/NP/NP_PerfectBro.png"),this.load.image("restartNP","assets/NP/restartNP.png"),this.load.image("restartWalk","assets/NP/restartWalk.png"),this.load.spritesheet("mantisNP","assets/NP/mantis.png",{frameWidth:240,frameHeight:240}),this.load.spritesheet("winkinwellNP","assets/NP/winkinwell.png",{frameWidth:240,frameHeight:272}),this.load.spritesheet("poteOprah","assets/NP/pote08_oprahshot.png",{frameWidth:88,frameHeight:92}),this.load.image("cactusObsNP1","assets/NP/Cactus_1_small_small.png"),this.load.image("cactusObsNP2","assets/NP/Cactus_2_small_tall.png"),this.load.image("cactusObsNP3","assets/NP/Cactus_3_small_tall.png"),this.load.image("cactusObsNP4","assets/NP/Cactus_4_wide_tall.png"),this.load.spritesheet("flyingrodsNP","assets/NP/flyingrods_NP.png",{frameWidth:96,frameHeight:72}),this.load.spritesheet("kunekuneNP","assets/NP/Enemy_kunekune.png",{frameWidth:48,frameHeight:112}),this.load.spritesheet("kunekuneYellowNP","assets/NP/Enemy_kunekune_ye.png",{frameWidth:48,frameHeight:112}),this.load.spritesheet("alienKids","assets/NP/Enemy_smallAlien.png",{frameWidth:128,frameHeight:104}),this.load.spritesheet("monkey","assets/NP/Enemy_Monky.png",{frameWidth:128,frameHeight:104}),this.load.spritesheet("flagropeNP","assets/NP/Enemy_flagrope.png",{frameWidth:48,frameHeight:220}),this.load.spritesheet("motorcycleNP","assets/NP/Motorcycle_low_spr_large.png",{frameWidth:96,frameHeight:108}),this.load.spritesheet("UFONP","assets/NP/UFO_NP.png",{frameWidth:96,frameHeight:72})}showLoadProgressBar(){let t=this.add.graphics(),e=this.game.config.width,s=this.game.config.height,i=this.add.graphics();i.fillStyle(2236962,.8),i.fillRect(240,270,320,50);let o=this.make.text({x:e/2,y:s/4+30,text:"Loading...",style:this.consts.fontoConf.loader});o.setOrigin(.5,.5);let n=this.make.text({x:e/2,y:s/4+50,text:"files",style:this.consts.fontoConf.loader});n.setOrigin(.5,.5),this.load.on("progress",(function(e){t.clear(),t.fillStyle(16777215,1),t.fillRect(250,280,300*e,30)})),this.load.on("fileprogress",(function(t){console.log(t.src),n.setText(t.src)})),this.load.on("complete",(function(){console.log("complete"),t.destroy(),i.destroy(),o.destroy()}))}create(){this.model=new a(this.consts),this.model.mediaManager=new h({scene:this}),this.scene.start("PlayScene",{model:this.model})}}const g=p;class u extends o().Scene{constructor(t="ResultScene"){super(t)}init(t){this.model=t.model,console.log("init result ")}create(){this.consts=new n,this.isGamerunning=!1,this.isResultPerfect=!1,this.cameras.main.setBackgroundColor(this.consts.colors.backgroundAsh),this.PassedTime=0,this.model.mediaManager.playSound("clearbgm",.1*this.consts.volumeSound),this.groundInitwidth=100,this.jumpVelocity=-1250,this.tintInc=0;const{height:t,width:e}=this.game.config,s=.5*t+110;this.bgHome=this.add.image(60,20,"homeInside").setOrigin(0,0).setScale(1.4),this.wallLayer=this.add.layer();const i=Math.min(18,this.model.result.book);this.bookTower=this.add.image(448,s,`endingBook${i}`).setOrigin(0,1).setScale(1.6).setAlpha(0),this.startTrigger=this.physics.add.sprite(1*e/5,s).setOrigin(0,1).setBodySize(230,20).setImmovable(),this.resultTrigger=this.physics.add.sprite(1*e/10+300,s).setBodySize(20,20).setOrigin(0,1).setImmovable(),this.resultTrigger.hitflag=!1,this.poteGround=this.physics.add.image(1*e/2,s+30).setSize(e,20).setOrigin(0,1).setImmovable(),this.pote=this.physics.add.sprite(1*e/10,s,"pote-idle").setScale(1.2).setOrigin(0,1).setCollideWorldBounds(!0).setGravityY(3e3),this.pote.hitPose=!1,this.gameClearScreen=this.add.container(3*e/5+50,100).setAlpha(0);let o="test";this.GameResultStr=`book: ${this.model.result.book}\ncoin: ${this.model.result.coin} / ${this.model.result.coinGen}\nmiss: ${this.model.result.miss}`,this.gameClearText=this.add.text(0,0,o,this.consts.fontoConf.resultTitle).setOrigin(0,.5),0==this.model.result.miss&&this.model.result.coin==this.model.result.coinGen&&(this.isResultPerfect=!0),this.isResultPerfect?(o="Perfect!",this.gameClearText.setText(o),this.gameClearText.setStroke("#00f",10),this.gameClearText.setColor("#ffffff"),this.gameClearText.setShadow(2,2,"#333333",2,!0,!0)):(o="Clear!",this.gameClearText.setText(o),this.gameClearText.setStroke("#ffffff",8)),this.gameResultText=this.add.text(0,120,this.GameResultStr,this.consts.fontoConf.resultDetail).setOrigin(0,.5),this.gameResultText.setStroke("#ffffff",4),this.restart=this.add.image(10,240,"restart").setInteractive().setOrigin(0,.5).setScale(1.2),this.restartSafe=this.add.image(10,304,"restartSafe").setInteractive().setOrigin(0,.5).setScale(1.2),this.appVersionText=this.add.text(136,360,"ver: "+this.consts.appVersion,this.consts.fontoConf.counter).setOrigin(0,0),this.appVersionText.setColor("#FFE7BF"),this.tweetLink=this.initTweetLink(136,212).setOrigin(0,0),this.creditLink=this.initInfoLinks(136,274).setOrigin(0,0),this.gameClearScreen.add([this.gameClearText,this.gameResultText,this.restart,this.restartSafe,this.tweetLink,this.creditLink,this.appVersionText]),this.pictframeScreen=this.add.container(1*e/5+60,s-300),this.pictframe=this.add.image(0,4,"pictframe_brown").setInteractive().setOrigin(0,0).setScale(.7),this.wallAlbum=this.add.image(3.5,7.5,"noi_album").setInteractive().setOrigin(0,0).setScale(.7),this.wallPotetoGannen=this.add.image(100,0,"pote-ganen").setInteractive().setOrigin(0,0).setScale(.5),this.kotobadakenochizu=this.add.image(0,90,"kotobadakenochizu").setInteractive().setOrigin(0,0).setScale(.7),this.pictframeScreen.add([this.pictframe,this.wallAlbum,this.wallPotetoGannen,this.kotobadakenochizu]),this.wallLayer.add(this.pictframeScreen),this.AddTapLinkToImage(this.wallAlbum,this.consts.noiUrl),this.AddTapLinkToImage(this.wallPotetoGannen,this.consts.naoeUrl),this.AddTapLinkToImage(this.kotobadakenochizu,this.consts.kotobaUrl),this.bookStoreScreen=this.add.container(60,s+80).setAlpha(0),this.bookStoreScreen.add(this.InitBookstoreImages()),this.initColliders(),this.initAnims(),this.initStartTrigger(),this.handleInputs()}initColliders(){this.physics.add.collider(this.pote,this.poteGround),this.physics.add.overlap(this.resultTrigger,this.pote,((t,e)=>{1!=t.hitflag&&(console.log("show result"),t.hitflag=!0,this.isGamerunning=!0,this.bookTower.setAlpha(1),this.gameClearScreen.setAlpha(1),this.bookStoreScreen.setAlpha(1))}),null,this)}initStartTrigger(){const{height:t,width:e}=this.game.config;this.physics.add.overlap(this.startTrigger,this.pote,(()=>{console.log("overlap"),this.pote.x+=1.4,this.pote.play("pote-run",1)}),null,this)}initAnims(){this.anims.create({key:"pote-run",frames:this.anims.generateFrameNumbers("pote",{start:1,end:2}),frameRate:10,repeat:-1}),this.anims.create({key:"pote-dance",frames:this.anims.generateFrameNumbers("potedance",{start:0,end:3}),frameRate:2.81,repeat:-1})}AddTapLinkToImage(t,e){return t.on("pointerup",(function(){this.openExternalLink(e)}),this),t}InitBookstoreImages(){let t=[];const e=.64;t=[this.add.image(0,0,"bookstore01").setInteractive().setOrigin(0,0).setScale(e),this.add.image(140,0,"bookstore02").setInteractive().setOrigin(0,0).setScale(e),this.add.image(280,0,"bookstore03").setInteractive().setOrigin(0,0).setScale(e),this.add.image(420,0,"bookstore04").setInteractive().setOrigin(0,0).setScale(e),this.add.image(560,0,"bookstore05").setInteractive().setOrigin(0,0).setScale(e),this.add.image(700,0,"bookstore06").setInteractive().setOrigin(0,0).setScale(e)];for(let e=0;e<this.consts.numberOfStores;e++)this.AddTapLinkToImage(t[e],this.consts.bookstoreList[e].url);return t}handleInputs(){this.restart.on("pointerdown",(()=>{this.restartGame()}),this),this.restartSafe.on("pointerdown",(()=>{this.restartGame(this.consts.gameModes[1])}),this),this.input.on("pointerdown",(()=>{this.pote.body.onFloor()&&this.pote.setVelocityY(this.jumpVelocity)}),this)}initInfoLinks(t,e){const s=this.consts.fontoConf.TapLink;return this.createTapLink.apply(this,[{xx:t,yy:e},"credits",s,function(){this.openExternalLink("./credits.html")}])}initTweetLink(t,e){const s=this.consts.fontoConf.TapLink;let i=this.createSNSShareString();const o="https://twitter.com/intent/tweet?text="+encodeURIComponent(i);return this.createTapLink.apply(this,[{xx:t,yy:e},"tweet!",s,function(){this.openExternalLink(o)}])}createSNSShareString(){let t="Potewalk\n";return t+="mode: "+this.model.gameMode+"\n",t+=`book: ${this.model.result.book}\ncoin: ${this.model.result.coin} / ${this.model.result.coinGen}\nmiss: ${this.model.result.miss}`,0==this.model.result.miss&&this.model.result.coin==this.model.result.coinGen&&(t+="\nperfect!"),t+="\n"+this.consts.appURL,console.log(t),t}createTapLink(t,e,s,i){const o=this.add.text(t.xx,t.yy,e,s).setInteractive();return o.setOrigin(.5,.5),o.on("pointerup",i,this),o}openExternalLink(t){let e=window.open();e.opener=null,e.referrer=null,e.location=t,e&&e.focus?e.focus():e||(window.location.href=t)}restartGame(t=this.consts.gameModes[0]){this.model.mediaManager.stopBGM(),this.model.mediaManager.stopPlaingSound(),this.model=new a(this.consts),t==this.consts.gameModes[1]&&(this.model.gameMode=this.consts.gameModes[1]),this.model.mediaManager=new h({scene:this}),this.scene.start("PlayScene",{model:this.model})}update(t,e){if(!this.isGamerunning)return;const s=this.model.hsv[this.tintInc].color,i=this.model.hsv[359-this.tintInc].color;this.isResultPerfect&&(this.gameClearText.setTint(s,i,s,i),this.tintInc++,this.tintInc>=360&&(this.tintInc=0)),this.pote.hitPose?this.pote.setTexture("pote-hurt"):this.pote.body.onFloor()?this.pote.play("pote-dance",!0):(this.pote.anims.stop(),this.pote.setTexture("pote"))}}const f=u;class b extends o().Scene{constructor(t="ResultNPScene"){super(t)}init(t){this.model=t.model,console.log("init result")}create(){this.consts=new n,this.isGamerunning=!1,this.isResultPerfect=!1,this.cameras.main.setBackgroundColor(this.consts.colors.backgroundNPPlay),this.PassedTime=0,this.model.mediaManager.setBGM("windySound",.2),this.groundInitwidth=100,this.jumpVelocity=-1250,this.tintInc=0;const{height:t,width:e}=this.game.config,s=.5*t+110;this.outYonderNP=this.add.image(400,20,"outYonderNP").setOrigin(0,0).setScale(.8),this.perfectBroNP=this.add.image(500,116,"perfectBroNP").setOrigin(0,0).setScale(.8).setAlpha(.4).setVisible(!1),this.wallLayer=this.add.layer(),this.startTrigger=this.physics.add.sprite(1*e/5,s).setOrigin(0,1).setBodySize(230,20).setImmovable(),this.resultTrigger=this.physics.add.sprite(1*e/10+300,s).setBodySize(20,20).setOrigin(0,1).setImmovable(),this.resultTrigger.hitflag=!1,this.poteGround=this.physics.add.image(1*e/2,s+30).setSize(e,20).setOrigin(0,1).setImmovable(),this.winkinwell=this.add.sprite(1*e/10,s,"winkinwellNP").setOrigin(0,1),this.pote=this.physics.add.sprite(1*e/10,s,"pote-idle").setScale(1.2).setOrigin(0,1).setCollideWorldBounds(!0).setGravityY(3e3),this.pote.hitPose=!1;this.gameClearScreen=this.add.container(3*e/5+50,350).setAlpha(0);let i="test";this.GameResultStr=`coin: ${this.model.result.coin} / ${this.model.result.coinGen}`,this.gameClearText=this.add.text(0,0,i,this.consts.fontoConf.titleNP).setOrigin(0,.5).setFontSize("64px"),0==this.model.result.miss&&this.model.result.coin==this.model.result.coinGen&&(this.isResultPerfect=!0),this.isResultPerfect?(i="Perfect!",this.gameClearText.setText(i),this.gameClearText.setStroke("#00f",8),this.gameClearText.setColor("#ffffff"),this.gameClearText.setShadow(2,2,"#333333",2,!0,!0)):(i="Clear!",this.gameClearText.setText(i)),this.gameResultText=this.add.text(0,70,this.GameResultStr,this.consts.fontoConf.bodyNP).setOrigin(0,.5);this.restartWalk=this.add.image(10,140,"restartWalk").setInteractive().setOrigin(0,.5).setScale(1.2),this.restartNope=this.add.image(10,204,"restartNP").setInteractive().setOrigin(0,.5).setScale(1.2),this.appVersionText=this.add.text(136,260,"ver: "+this.consts.appVersion,this.consts.fontoConf.counter).setOrigin(0,0),this.appVersionText.setColor("#FFE7BF"),this.tweetLink=this.initTweetLink(136,112).setOrigin(0,0),this.gameClearScreen.add([this.gameClearText,this.gameResultText,this.restartWalk,this.restartNope,this.tweetLink,this.appVersionText]),this.initColliders(),this.initAnims(),this.initCoinParticleNP(),this.initOnAnimParticle(),this.initStartTrigger(),this.handleInputs()}initColliders(){this.physics.add.collider(this.pote,this.poteGround),this.physics.add.overlap(this.resultTrigger,this.pote,((t,e)=>{1!=t.hitflag&&(console.log("show result"),t.hitflag=!0,this.isGamerunning=!0,this.startTrigger.disableBody(!0,!0),this.model.result.coin>0&&(this.winkinwell.play("winkinwell-flash"),this.pote.play("pote-oprah")),this.timerOneShot=this.time.delayedCall(200+1e3/this.consts.npOprahshotFrameRate*3*this.model.result.coin,(()=>{this.gameClearScreen.setAlpha(1),this.perfectEffect()}),this),this.resultTrigger.disableBody(!0,!0))}),null,this)}initStartTrigger(){const{height:t,width:e}=this.game.config;this.physics.add.overlap(this.startTrigger,this.pote,(()=>{console.log("overlap"),this.pote.x+=1.4,this.pote.play("pote-run",1)}),null,this)}initAnims(){this.anims.create({key:"pote-run",frames:this.anims.generateFrameNumbers("pote",{start:1,end:2}),frameRate:10,repeat:-1}),this.anims.create({key:"pote-oprah",frames:this.anims.generateFrameNumbers("poteOprah",{start:0,end:2}),frameRate:this.consts.npOprahshotFrameRate,repeat:Math.max(0,this.model.result.coin-1)}),this.anims.create({key:"winkinwell-flash",frames:this.anims.generateFrameNumbers("winkinwellNP",{start:0,end:2}),frameRate:this.consts.npOprahshotFrameRate,repeat:Math.max(0,this.model.result.coin-1)})}initCoinParticleNP(){this.coinParticle=this.add.particles("coinBookIcon"),this.coinParticle.createEmitter({frame:0,angle:{min:250,max:265},speed:{min:60,max:70},quantity:1,lifespan:350,alpha:{start:1,end:.8},scale:2.2,gravityY:800,on:!1})}initOnAnimParticle(){this.pote.on("animationupdate",((t,e,s)=>{"pote-oprah"==t.key&&1==e.textureFrame&&this.coinParticle.emitParticleAt(s.x-10,s.y-70),console.log("coinemitter frame"+t.key+e.textureFrame)}),this)}AddTapLinkToImage(t,e){return t.on("pointerup",(function(){this.openExternalLink(e)}),this),t}handleInputs(){this.restartWalk.on("pointerdown",(()=>{this.restartGame(this.consts.gameModes[0])}),this),this.restartNope.on("pointerdown",(()=>{this.restartGame(this.consts.gameModes[2])}),this),this.input.on("pointerdown",(()=>{this.pote.body.onFloor()&&this.pote.setVelocityY(this.jumpVelocity)}),this)}initInfoLinks(t,e){const s=this.consts.fontoConf.TapLink;return this.createTapLink.apply(this,[{xx:t,yy:e},"credits",s,function(){this.openExternalLink("./credits.html")}])}initTweetLink(t,e){const s=this.consts.fontoConf.TapLink;let i=this.createSNSShareStringNP();const o="https://twitter.com/intent/tweet?text="+encodeURIComponent(i);return this.createTapLink.apply(this,[{xx:t,yy:e},"tweet!",s,function(){this.openExternalLink(o)}])}createSNSShareStringNP(){let t="Potewalk\n";return t+="mode: "+this.model.gameMode+"(secret)\n",t+=`coin: ${this.model.result.coin} / ${this.model.result.coinGen}`,0==this.model.result.miss&&this.model.result.coin==this.model.result.coinGen&&(t+="\nperfect! amazing!"),t+="\n"+this.consts.appURL,console.log(t),t}createTapLink(t,e,s,i){const o=this.add.text(t.xx,t.yy,e,s).setInteractive();return o.setOrigin(.5,.5),o.on("pointerup",i,this),o}openExternalLink(t){let e=window.open();e.opener=null,e.referrer=null,e.location=t,e&&e.focus?e.focus():e||(window.location.href=t)}goNPScene(){console.log("NOPE"),this.restartGame(this.consts.gameModes[2])}perfectEffect(){this.isResultPerfect&&this.perfectBroNP.setVisible(!0)}restartGame(t=this.consts.gameModes[0],e=!1){let s="PlayScene";this.model.mediaManager.stopBGM(),this.model.mediaManager.stopPlaingSound(),this.model=new a(this.consts),this.model.mediaManager=new h({scene:this}),t==this.consts.gameModes[1]?this.model.gameMode=this.consts.gameModes[1]:t==this.consts.gameModes[2]&&(console.log("NOPEsetting"),s="PlayNPScene",this.model.gameMode=this.consts.gameModes[2],this.model.skipTitleNP=e),this.scene.start(s,{model:this.model})}update(t,e){if(!this.isGamerunning)return;const s=this.model.hsv[this.tintInc].color,i=this.model.hsv[359-this.tintInc].color;this.isResultPerfect&&(this.gameClearText.setTint(s,i,s,i),this.tintInc++,this.tintInc>=360&&(this.tintInc=0))}}const y={type:o().AUTO,width:900,height:680,pixelArt:!0,transparent:!0,physics:{default:"arcade"},scene:[g,l,f,class extends l{constructor(t="PlayNPScene"){super(t)}init(t){this.model=t.model}create(){this.consts=new n;const{height:t,width:e}=this.game.config,s=.5*t;console.log(this.model.skipTitleNP),this.initProperties(),this.openingDialogue=this.add.text(e/2,.22*t,"POTE",this.consts.fontoConf.titleNP).setOrigin(.5,0).setAlpha(0),this.openingDialogueNP=this.add.text(e/2,.22*t,"NOPE",this.consts.fontoConf.titleNP).setOrigin(.5,0).setAlpha(0),this.destinationTxt=this.add.text(20,10,`${this.consts.npscenetitleList[this.model.result.visited].name}`,this.consts.fontoConf.bodyNP).setAlpha(0),this.startTrigger=this.physics.add.sprite(0,10).setOrigin(0,1).setImmovable(),this.poteGround=this.physics.add.image(0,s+26).setSize(250,20).setOrigin(0,1).setImmovable(),this.backMountains=this.add.tileSprite(0,s-50,e,112,"backMountainNP").setOrigin(0,1).setScale(1.2).setAlpha(0),this.ground=this.add.tileSprite(0,s,this.groundInitwidth-10,26,"groundNP").setOrigin(0,1).setVisible(!1),this.envLayer=this.add.layer(),this.environment=this.add.group(),this.initEnvObjects(t,e,this.environment,this.envLayer),this.buildingLayer=this.add.layer(),this.buildings=this.physics.add.group(),this.objLayer=this.add.layer(),this.obstacles=this.physics.add.group(),this.coinLayer=this.add.layer(),this.coins=this.physics.add.group(),this.poteHomeLayer=this.add.layer(),this.poteHomeGrp=this.physics.add.group(),this.counterItems=this.add.group();const i=e-300;this.initCounters(i,11,28,this.counterItems);this.LocationIcons=this.add.group(),this.LocationIcons.addMultiple([this.add.image(80,s+80,"buildingNPicon01").setScale(1.2),this.add.image(200,s+80,"buildingNPicon02").setScale(1.2),this.add.image(320,s+80,"buildingNPicon03").setScale(1.2),this.add.image(440,s+80,"buildingNPicon04").setScale(1.2),this.add.image(560,s+80,"buildingNPicon05").setScale(1.2),this.add.image(680,s+80,"buildingNPicon06").setScale(1.2)]),this.LocationIcons.setAlpha(0),this.pote=this.physics.add.sprite(0,s,"pote-idle").setOrigin(0,1).setCollideWorldBounds(!0).setGravityY(3e3).setVisible(!1),this.pote.hitPose=!1,this.gameOverScreen=this.add.container(1*e/2,.1*t).setAlpha(0),this.initGameOverScreen(this.gameOverScreen),this.initAnims(),this.initColliders(),this.initStartEffect()}initProperties(){this.isGamerunning=!1,this.cameras.main.setBackgroundColor(this.consts.colors.background),this.gameSpeed=this.consts.gameSpeedNP,this.groundInitwidth=100,this.obsRespawnTime=0,this.numberOfObstacleSet=0,this.coinRespawnTime=0,this.storeRespawnTime=0,this.npCloudIncAlphaIncTime=0,this.counterStr="coins:0",this.coinCnt=0,this.storePlacedCnt=0}initEnvObjects(t,e,s,i){this.stayingCloud=this.add.image(.8*e,190,"cloudNope").setAlpha(0).setScale(1),i.add(this.stayingCloud),s.addMultiple([this.add.image(.25*e,170,"cloud"),this.add.image(.62*e,80,"cloud"),this.add.image(.9*e,120,"cloud")]),s.setAlpha(0),i.add(s.getChildren())}initCounters(t,e,s,i){this.coinCounterText=this.add.text(t+20,e,"0",this.consts.fontoConf.counter),i.addMultiple([this.add.sprite(t,s,"coinBookIcon",0).setScale(2),this.coinCounterText]),i.setAlpha(0)}initGameOverScreen(t){const e=t,s=this.add.text(0,0,"GAME OVER",this.consts.fontoConf.titleNP).setOrigin(.5,0),i=this.add.text(0,120,"Give up?",this.consts.fontoConf.resultDetail).setOrigin(.5,0).setColor("#ffffff").setFontSize("64px");this.retryNopeText=this.add.text(-20,190,"Nope!",this.consts.fontoConf.resultDetail).setInteractive().setOrigin(1,0).setColor("#ffffff"),this.retryWalkText=this.add.text(30,190,"Yup!",this.consts.fontoConf.resultDetail).setInteractive().setOrigin(0,0).setColor("#ffffff"),e.add([s,i,this.retryNopeText,this.retryWalkText])}initColliders(){this.physics.add.collider(this.pote,this.poteGround),this.physics.add.overlap(this.pote,this.buildings,((t,e)=>{e.hitFlg||(e.hitFlg=!0,this.LocationIcons.getChildren()[this.model.result.visited].setAlpha(1),this.model.storeVisit[`store${e.buildingNum}`]=!0,this.model.result.visited++,this.model.result.visited<=this.consts.numberOfStores?this.destinationTxt.setText(`${this.consts.npscenetitleList[this.model.result.visited].name}`):this.destinationTxt.setText("NO"),3==this.model.result.visited&&(this.gameSpeed=this.consts.gameSpeedNPFast))}),null,this),this.model.gameMode!==this.consts.gameModes[1]&&(this.obstacleCollider=this.physics.add.overlap(this.pote,this.obstacles,((t,e)=>{e.hitFlg||(e.hitFlg=!0,this.model.result.miss++,this.coinCnt>0&&this.coinCnt--,this.model.mediaManager.playSound("damageSound",.8*this.consts.volumeSound),this.pote.hitPose||(this.pote.hitPose=!0,console.log("hit-pose"),this.timerOneShot=this.time.delayedCall(300,(()=>{this.pote.hitPose=!1}),this)),this.showGameOver())}),null,this)),this.physics.add.overlap(this.pote,this.coins,((t,e)=>{e.hitFlg||(e.hitFlg=!0,this.model.mediaManager.playSound("coinSound"),this.coinCnt++,this.model.result.coin++,this.coins.killAndHide(e))}),null,this),this.physics.add.overlap(this.pote,this.poteHomeGrp,((t,e)=>{e.hitFlg||(e.hitFlg=!0,this.isGamerunning=!1,this.obstacleCollider.destroy(),this.model.mediaManager.stopBGM(),this.model.mediaManager.playSound("goalSound",.2*this.consts.volumeSound),this.pote.play("pote-happy",1),this.timerOneShot=this.time.delayedCall(2800,(()=>{this.goClearScene()}),this))}),null,this)}initStartEffect(){if(this.model.skipTitleNP)return this.pote.setVisible(!0),this.ground.setVisible(!0),this.handleInputs(),void this.initStartTrigger();this.tweens.add({targets:this.openingDialogue,duration:1400,hold:300,yoyo:!0,props:{alpha:1,ease:o().Math.Easing.Cubic.InOut}}),this.time.delayedCall(3200,(()=>{this.tweens.add({targets:this.openingDialogueNP,duration:4e3,props:{alpha:1,ease:o().Math.Easing.Cubic.InOut}}),this.time.delayedCall(3e3,(()=>{this.pote.setVisible(!0),this.ground.setVisible(!0),this.handleInputs(),this.initStartTrigger()}),this)}),this)}initStartTrigger(){const{height:t,width:e}=this.game.config,s=.5*t;this.physics.add.overlap(this.startTrigger,this.pote,(()=>{if(10===this.startTrigger.y)return this.startTrigger.body.reset(0,s),this.model.mediaManager.setBGM("windySound",.3),void this.openingDialogueNP.setVisible(!1);this.startTrigger.disableBody(!0,!0);const t=this.time.addEvent({delay:1e3/60,loop:!0,callbackScope:this,callback:()=>{this.pote.setVelocityX(80),this.pote.play("pote-run",1),this.ground.width<e?this.ground.width+=34:(this.ground.width=e,this.isGamerunning=!0,this.pote.setVelocityX(0),this.environment.setAlpha(1),this.destinationTxt.setAlpha(1),this.backMountains.setAlpha(.6),this.counterItems.setAlpha(1),this.coinCounterText.setAlpha(1),this.stayingCloud.setAlpha(1),this.cameras.main.setBackgroundColor(this.consts.colors.backgroundNPPlay),t.remove())}})}),null,this)}initAnims(){this.anims.create({key:"mantis-cling",frames:this.anims.generateFrameNumbers("mantisNP",{start:0,end:1}),frameRate:6,repeat:-1}),this.anims.create({key:"bike-ride",frames:this.anims.generateFrameNumbers("motorcycleNP",{start:0,end:1}),frameRate:4,repeat:-1}),this.anims.create({key:"kune-kune-red",frames:this.anims.generateFrameNumbers("kunekuneNP",{start:0,end:1}),frameRate:3,repeat:-1}),this.anims.create({key:"kune-kune-yellow",frames:this.anims.generateFrameNumbers("kunekuneYellowNP",{start:0,end:1}),frameRate:3,repeat:-1}),this.anims.create({key:"nope-rope",frames:this.anims.generateFrameNumbers("flagropeNP",{start:0,end:1}),frameRate:4,repeat:-1}),this.anims.create({key:"UFO-NP-fly",frames:this.anims.generateFrameNumbers("UFONP",{start:0,end:1}),frameRate:4,repeat:-1}),this.anims.create({key:"flyrods-fly",frames:this.anims.generateFrameNumbers("flyingrodsNP",{start:0,end:1}),frameRate:8,repeat:-1}),this.anims.create({key:"monkey-angry",frames:this.anims.generateFrameNumbers("monkey",{start:0,end:1}),frameRate:3,repeat:-1}),this.anims.create({key:"alienKids-look",frames:this.anims.generateFrameNumbers("alienKids",{start:0,end:1}),frameRate:4,repeat:-1})}handleInputs(){super.handleInputs(),this.input.on("pointerdown",(()=>{this.pote.body.onFloor()&&(this.pote.setVelocityY(this.consts.jumpVelocity),this.model.mediaManager.playSound("jumpSound",.8*this.consts.volumeSound))}),this),this.input.keyboard.on("keydown-SPACE",(()=>{this.pote.body.onFloor()&&(this.pote.setVelocityY(this.consts.jumpVelocity),this.model.mediaManager.playSound("jumpSound",.8*this.consts.volumeSound))}),this),this.retryNopeText.on("pointerdown",(()=>{this.prepareRestart(),this.restartGame(this.consts.gameModes[2],this.consts.skipTitleNPTrue)}),this),this.retryWalkText.on("pointerdown",(()=>{this.prepareRestart(),this.restartGame(this.consts.gameModes[0])}),this)}showGameOver(){this.isGamerunning=!1,this.pote.setTexture("pote-hurt"),this.physics.pause(),this.anims.pauseAll(),this.gameOverScreen.setAlpha(1)}prepareRestart(){this.physics.resume(),this.isGamerunning=!0,this.anims.resumeAll()}placeObstacle(){const{width:t,height:e}=this.game.config,s=.5*e,i=Math.floor(5*Math.random())+1,n=o().Math.Between(this.consts.distances.obstacleFrom,this.consts.distances.obstacleTo);let a;if(console.log(i),i>4){const e=[40,120];a=this.placeObstacleCore(t+n,s-e[Math.floor(2*Math.random())],"flyingrodsNP"),a.play("flyrods-fly",1),a.body.height=a.body.height/1.5}else a=this.placeObstacleCore(t+n,s,`cactusObsNP${i}`),a.body.offset.y=5}placeSpecialObstacle(){const{width:t,height:e}=this.game.config,s=.5*e;let i=this.placeObstacleCore(t+this.consts.npSpObstacleList[this.model.result.visited].distanceX,s-this.consts.npSpObstacleList[this.model.result.visited].posYUp,this.consts.npSpObstacleList[this.model.result.visited].name);if(i.play(this.consts.npSpObstacleList[this.model.result.visited].anim,1),6==this.model.result.visited){i.setScale(1.2),i.body.height=i.body.height/4,i.body.width=i.body.width/2,i.body.offset.y=10,i.body.offset.x=-10;this.tweens.add({targets:i,delay:80,duration:600,hold:80,loop:-1,yoyo:!0,props:{y:160,ease:o().Math.Easing.Sine.InOut}})}}placeObstacleCore(t,e,s){const i=this.obstacles.create(t,e,s);return i.setOrigin(0,1).setImmovable(),i.hitFlg=!1,this.objLayer.add(i),i}placeCoin(){const{width:t,height:e}=this.game.config,s=.5*e;let i=o().Math.Between(850,950),n=22;const a=[o().Math.Between(100,350),o().Math.Between(850,950)],h=[22,70,100];let r;this.storePlacedCnt>1&&(n=h[Math.floor(3*Math.random())]),this.storePlacedCnt>2&&(i=a[Math.floor(2*Math.random())]),console.log("coin"),r=this.coins.create(t+i,s-n,"coin"),r.play("coin-rotate",0),r.scale=2*r.scale,r.setOrigin(0,1).setImmovable(),r.hitFlg=!1,this.model.result.coinGen++,this.coinLayer.add(r)}placeBuilding(t){const{width:e,height:s}=this.game.config,i=.5*s;let o;console.log(t);const n=`buildingNP0${t}`;console.log(n),o=this.buildings.create(e+200,i,n),o.setOrigin(0,1).setImmovable(),o.hitFlg=!1,o.buildingNum=t,this.buildingLayer.add(o)}placePoteHome(){const{width:t,height:e}=this.game.config,s=.5*e;console.log("goalNP"),this.poteHome=this.poteHomeGrp.create(t+200,s+28,"goalNP").setOrigin(0,1).setImmovable(),this.poteHome.hitFlg=!1,this.poteHome.body.width=this.poteHome.body.width/2,this.poteHome.body.offset.x=32,this.poteHomeLayer.add(this.poteHome)}goClearScene(){this.scene.start("ResultNPScene",{model:this.model})}update(t,e){this.isGamerunning&&(this.coinCounterText.setText(`: ${this.coinCnt}`),this.ground.tilePositionX+=this.gameSpeed*this.consts.worldScroll,this.backMountains.tilePositionX+=this.gameSpeed*this.consts.worldScroll*.4,o().Actions.IncX(this.environment.getChildren(),-.5),o().Actions.IncX(this.obstacles.getChildren(),-this.gameSpeed),o().Actions.IncX(this.coins.getChildren(),-this.gameSpeed),o().Actions.IncX(this.buildings.getChildren(),-this.gameSpeed*this.consts.worldScroll),o().Actions.IncX(this.poteHomeGrp.getChildren(),-this.gameSpeed*this.consts.worldScroll),this.obsRespawnTime+=e*this.gameSpeed*.08,this.coinRespawnTime+=e*this.gameSpeed*.08,this.storeRespawnTime+=e*this.gameSpeed*.08,this.homeTime+=e*this.gameSpeed*.08,this.obsRespawnTime>=this.consts.obsRespawnInterval&&(this.numberOfObstacleSet%5==3?this.placeSpecialObstacle():this.placeObstacle(),this.obsRespawnTime=0,this.numberOfObstacleSet++),this.storePlacedCnt<this.consts.numberOfStores&&this.coinRespawnTime>=this.consts.coinRespawnIntervalNP&&(this.placeCoin(),this.coinRespawnTime=0),this.storeRespawnTime>=this.consts.storeRespawnInterval&&(this.storePlacedCnt<this.consts.numberOfStores?(this.placeBuilding(this.storePlacedCnt+1),this.storeRespawnTime=0,this.storePlacedCnt++):(this.placePoteHome(),this.storeRespawnTime=0)),this.removeObjPassedDisplay(this.obstacles),this.removeObjPassedDisplay(this.coins),this.removeObjPassedDisplay(this.buildings),this.environment.getChildren().forEach((t=>{t.getBounds().right<0&&(t.x=this.game.config.width+30)})),this.pote.hitPose?this.pote.setTexture("pote-hurt"):this.pote.body.onFloor()?this.pote.play("pote-run",!0):(this.pote.anims.stop(),this.pote.setTexture("pote")))}},b]};new(o().Game)(y)}},s={};function i(t){var o=s[t];if(void 0!==o)return o.exports;var n=s[t]={exports:{}};return e[t].call(n.exports,n,n.exports,i),n.exports}i.m=e,t=[],i.O=(e,s,o,n)=>{if(!s){var a=1/0;for(d=0;d<t.length;d++){for(var[s,o,n]=t[d],h=!0,r=0;r<s.length;r++)(!1&n||a>=n)&&Object.keys(i.O).every((t=>i.O[t](s[r])))?s.splice(r--,1):(h=!1,n<a&&(a=n));if(h){t.splice(d--,1);var l=o();void 0!==l&&(e=l)}}return e}n=n||0;for(var d=t.length;d>0&&t[d-1][2]>n;d--)t[d]=t[d-1];t[d]=[s,o,n]},i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var s in e)i.o(e,s)&&!i.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t={143:0};i.O.j=e=>0===t[e];var e=(e,s)=>{var o,n,[a,h,r]=s,l=0;if(a.some((e=>0!==t[e]))){for(o in h)i.o(h,o)&&(i.m[o]=h[o]);if(r)var d=r(i)}for(e&&e(s);l<a.length;l++)n=a[l],i.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return i.O(d)},s=self.webpackChunkpote_walk=self.webpackChunkpote_walk||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))})();var o=i.O(void 0,[736],(()=>i(462)));o=i.O(o)})();