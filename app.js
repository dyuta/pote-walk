(()=>{"use strict";var t,e={218:(t,e,s)=>{var i=s(260),o=s.n(i);const a=class{constructor(){this.name="constObj",this.appURL="https://dyuta.github.io/pote-walk/",this.numberOfStores=2,this.volumeBGM=.1,this.volumeSound=.2,this.START_GAME="START_GAME",this.GO_CREDIT="GO_CREDIT",this.GO_TITLE="GO_TITLE",this.VOLUME_OFF="VOLUME_OFF",this.VOLUME_ON="VOLUME_ON",this.GO_POTATO="GO_POTATO",this.obsRespawnInterval=1500,this.storeRespawnInterval=10500}};class h extends o().Scene{constructor(){super("PlayScene")}init(t){this.model=t.model}create(){this.consts=new a,this.isGamerunning=!1,this.gameSpeed=10,this.obsRespawnTime=0,this.storeRespawnTime=0,this.groundInitwidth=100,this.jumpVelocity=-1250;const{height:t,width:e}=this.game.config,s=.5*t;this.setStoreCnt=0,this.startTrigger=this.physics.add.sprite(0,10).setOrigin(0,1).setImmovable(),this.poteGround=this.physics.add.image(0,s+26).setSize(250,20).setOrigin(0,1).setImmovable(),this.ground=this.add.tileSprite(0,s,this.groundInitwidth,26,"ground").setOrigin(0,1),this.objLayer=this.add.layer(),this.bookStoreLayer=this.add.layer(),this.poteHomeLayer=this.add.layer(),this.pote=this.physics.add.sprite(0,s,"pote-idle").setOrigin(0,1).setCollideWorldBounds(!0).setGravityY(3e3),this.pote.hitPose=!1,this.obstacles=this.physics.add.group(),this.bookStores=this.physics.add.group(),this.poteHomeGrp=this.physics.add.group(),this.initAnims(),this.initColliders(),this.initStartTrigger(),this.handleInputs()}initColliders(){this.physics.add.collider(this.pote,this.poteGround),this.physics.add.overlap(this.pote,this.bookStores,((t,e)=>{e.hitFlg||(console.log("enter store"),e.hitFlg=!0,this.model.storeVisit[`store${e.bookStoreNum}`]=!0,console.log(this.model.storeVisit.store1))}),null,this),this.physics.add.overlap(this.pote,this.obstacles,((t,e)=>{e.hitFlg||(console.log("hit"),e.hitFlg=!0,this.pote.hitPose||(this.pote.hitPose=!0,console.log("hit-pose"),this.timerOneShot=this.time.delayedCall(300,(()=>{this.pote.hitPose=!1}),this)))}),null,this)}initStartTrigger(){const{height:t,width:e}=this.game.config,s=.5*t;this.physics.add.overlap(this.startTrigger,this.pote,(()=>{if(10===this.startTrigger.y)return void this.startTrigger.body.reset(0,s);this.startTrigger.disableBody(!0,!0);const t=this.time.addEvent({delay:1e3/60,loop:!0,callbackScope:this,callback:()=>{this.pote.setVelocityX(80),this.pote.play("pote-run",1),this.ground.width<e?this.ground.width+=34:(this.ground.width=e,this.isGamerunning=!0,this.pote.setVelocityX(0),t.remove())}})}),null,this)}initAnims(){this.anims.create({key:"pote-run",frames:this.anims.generateFrameNumbers("pote",{start:1,end:2}),frameRate:10,repeat:-1}),this.anims.create({key:"enemy-bird-fly",frames:this.anims.generateFrameNumbers("enemy-bird",{start:0,end:1}),frameRate:6,repeat:-1})}handleInputs(){this.input.on("pointerdown",(()=>{this.pote.body.onFloor()&&this.pote.setVelocityY(this.jumpVelocity)}),this)}placeObstacle(){const{width:t,height:e}=this.game.config,s=.5*e,i=Math.floor(7*Math.random())+1,a=o().Math.Between(500,750);let h;if(console.log(i),i>6){console.log("bird");const e=[22,50];h=this.obstacles.create(t+a,s-e[Math.floor(2*Math.random())],"enemy-bird"),h.play("enemy-bird-fly",1),h.body.height=h.body.height/1.5}else h=this.obstacles.create(t+a,s,`obstacle-${i}`),h.body.offset.y=5;h.setOrigin(0,1).setImmovable(),h.hitFlg=!1,this.objLayer.add(h)}placeBookstore(t){const{width:e,height:s}=this.game.config,i=.5*s;let o;console.log(t),1==t&&(console.log("bookStore01"),o=this.bookStores.create(e+400,i,"bookstore01")),o.setOrigin(0,1).setImmovable(),o.hitFlg=!1,o.bookStoreNum=t,this.bookStoreLayer.add(o)}placePoteHome(){const{width:t,height:e}=this.game.config,s=.5*e;console.log("potehome"),this.poteHome=this.poteHomeGrp.create(t+500,s+20,"potehome").setOrigin(0,1).setImmovable(),this.poteHome.hitFlg=!1,this.poteHomeLayer.add(this.poteHome)}update(t,e){if(!this.isGamerunning)return;const s=this.consts.obsRespawnInterval,i=this.consts.storeRespawnInterval;this.ground.tilePositionX+=this.gameSpeed,o().Actions.IncX(this.obstacles.getChildren(),-this.gameSpeed),o().Actions.IncX(this.bookStores.getChildren(),.3*-this.gameSpeed),o().Actions.IncX(this.poteHomeGrp.getChildren(),.3*-this.gameSpeed),this.obsRespawnTime+=e*this.gameSpeed*.08,this.storeRespawnTime+=e*this.gameSpeed*.08,this.homeTime+=e*this.gameSpeed*.08,this.obsRespawnTime>=s&&(this.placeObstacle(),this.obsRespawnTime=0),this.storeRespawnTime>=i&&(this.setStoreCnt<this.consts.numberOfStores?(this.placeBookstore(1),this.storeRespawnTime=0,this.setStoreCnt+=1):(this.placePoteHome(),this.storeRespawnTime=0)),this.obstacles.getChildren().forEach((t=>{t.getBounds().right<0&&this.obstacles.killAndHide(t)})),this.bookStores.getChildren().forEach((t=>{t.getBounds().right<0&&this.bookStores.killAndHide(t)})),this.pote.hitPose?this.pote.setTexture("pote-hurt"):!this.pote.body.onFloor()>0?(this.pote.anims.stop(),this.pote.setTexture("pote")):this.pote.play("pote-run",!0)}}const r=h;const n=class{constructor(){this.storeVisit={store1:!1,store2:!1,store3:!1,store4:!1,store5:!1,store6:!1},this.hsv=Phaser.Display.Color.HSVColorWheel(),this.result={coin:0,miss:0,score:0},this._isSceneChangeReserved=!1}};class l extends o().Scene{constructor(){super("PreloadScene")}preload(){this.load.audio("jump","assets/jump.m4a"),this.load.audio("hit","assets/hit.m4a"),this.load.audio("reach","assets/reach.m4a"),this.load.image("ground","assets/ground.png"),this.load.image("dino-idle","assets/dino-idle.png"),this.load.image("dino-hurt","assets/dino-hurt.png"),this.load.image("restart","assets/restart.png"),this.load.image("game-over","assets/game-over.png"),this.load.image("cloud","assets/cloud.png"),this.load.image("pote-idle","assets/pote_idle2.png"),this.load.image("pote-hurt","assets/pote_hurt.png"),this.load.image("bookstore01","assets/bookstore_01temp.png"),this.load.image("potehome","assets/home_tmp.png"),this.load.spritesheet("star","assets/stars.png",{frameWidth:9,frameHeight:9}),this.load.spritesheet("moon","assets/moon.png",{frameWidth:20,frameHeight:40}),this.load.spritesheet("dino","assets/dino-run.png",{frameWidth:88,frameHeight:94}),this.load.spritesheet("dino-down","assets/dino-down.png",{frameWidth:118,frameHeight:94}),this.load.spritesheet("enemy-bird","assets/enemy-bird.png",{frameWidth:92,frameHeight:77}),this.load.spritesheet("pote","assets/pote_run2.png",{frameWidth:88,frameHeight:94}),this.load.image("obstacle-1","assets/cactuses_small_1.png"),this.load.image("obstacle-2","assets/cactuses_small_2.png"),this.load.image("obstacle-3","assets/cactuses_small_3.png"),this.load.image("obstacle-4","assets/cactuses_big_1.png"),this.load.image("obstacle-5","assets/cactuses_big_2.png"),this.load.image("obstacle-6","assets/cactuses_big_3.png")}create(){this.model=new n,this.scene.start("PlayScene",{model:this.model})}}const d=l,p={type:o().AUTO,width:900,height:680,pixelArt:!0,transparent:!0,physics:{default:"arcade",arcade:{debug:!0}},scene:[d,r]};new(o().Game)(p)}},s={};function i(t){var o=s[t];if(void 0!==o)return o.exports;var a=s[t]={exports:{}};return e[t].call(a.exports,a,a.exports,i),a.exports}i.m=e,t=[],i.O=(e,s,o,a)=>{if(!s){var h=1/0;for(d=0;d<t.length;d++){for(var[s,o,a]=t[d],r=!0,n=0;n<s.length;n++)(!1&a||h>=a)&&Object.keys(i.O).every((t=>i.O[t](s[n])))?s.splice(n--,1):(r=!1,a<h&&(h=a));if(r){t.splice(d--,1);var l=o();void 0!==l&&(e=l)}}return e}a=a||0;for(var d=t.length;d>0&&t[d-1][2]>a;d--)t[d]=t[d-1];t[d]=[s,o,a]},i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var s in e)i.o(e,s)&&!i.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t={143:0};i.O.j=e=>0===t[e];var e=(e,s)=>{var o,a,[h,r,n]=s,l=0;if(h.some((e=>0!==t[e]))){for(o in r)i.o(r,o)&&(i.m[o]=r[o]);if(n)var d=n(i)}for(e&&e(s);l<h.length;l++)a=h[l],i.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return i.O(d)},s=self.webpackChunkpote_walk=self.webpackChunkpote_walk||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))})();var o=i.O(void 0,[736],(()=>i(218)));o=i.O(o)})();